<script type="text/javascript">
var offsetX = $("#loveHeart").width() / 2;
var offsetY = $("#loveHeart").height() / 2 - 55;

// Countdown target: Tomorrow at 4:25 PM
var countdownDate = new Date();
countdownDate.setDate(countdownDate.getDate() + 1);
countdownDate.setHours(16); // 4 PM = 16
countdownDate.setMinutes(25);
countdownDate.setSeconds(0);
countdownDate.setMilliseconds(0);

// Check if browser supports canvas
if (!document.createElement('canvas').getContext) {
	var msg = document.createElement("div");
	msg.id = "errorMsg";
	msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 
	document.body.appendChild(msg);
	$("#code").css("display", "none")
	$("#copyright").css("position", "absolute");
	$("#copyright").css("bottom", "10px");
	document.execCommand("stop");
} else {
	setTimeout(function () {
		startHeartAnimation();
	}, 5000);

	updateCountdown();
	setInterval(updateCountdown, 1000);

	adjustCodePosition();
	$("#code").typewriter();
}

// Countdown logic
function updateCountdown() {
	var now = new Date();
	var timeLeft = countdownDate - now;

	if (timeLeft <= 0) {
		document.getElementById("elapseClock").innerHTML = "She's back!";
		return;
	}

	var seconds = Math.floor(timeLeft / 1000);
	var days = Math.floor(seconds / (3600 * 24));
	seconds %= (3600 * 24);
	var hours = Math.floor(seconds / 3600);
	seconds %= 3600;
	var minutes = Math.floor(seconds / 60);
	seconds %= 60;

	var result = days + " days " + pad(hours) + " hours " + pad(minutes) + " minutes " + pad(seconds) + " seconds";
	document.getElementById("elapseClock").innerHTML = result;
}

function pad(n) {
	return n < 10 ? '0' + n : n;
}
</script>
